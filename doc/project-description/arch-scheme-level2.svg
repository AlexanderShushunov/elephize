<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1018px" preserveAspectRatio="none" style="width:939px;height:1018px;" version="1.1" viewBox="0 0 939 1018" width="939px" zoomAndPan="magnify"><defs><filter height="300%" id="f1jvj39scl4o3l" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[f2b73aba29a8fc2ce42b63abbb6a8051]
cluster - --><rect fill="#FFFFFF" filter="url(#f1jvj39scl4o3l)" height="999" style="stroke:#000000;stroke-width:1.5;" width="920" x="7" y="7"/><path d="M23,7 L23,16.2969 L13,26.2969 L7,26.2969 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="6" x="10" y="20.9951">-</text><!--MD5=[1b197895d3307f19978cf9971e4234aa]
cluster translateProgram--><polygon fill="#FFFFFF" filter="url(#f1jvj39scl4o3l)" points="31,147,182,147,189,169.2969,903,169.2969,903,885,31,885,31,147" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="31" x2="189" y1="169.2969" y2="169.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="145" x="35" y="161.9951">translateProgram</text><!--MD5=[76aec46e276010bed819f97a263aa707]
cluster renderModule--><polygon fill="#FFFFFF" filter="url(#f1jvj39scl4o3l)" points="355,314,365,304,631,304,631,510,621,520,355,520,355,314" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="621" x2="631" y1="314" y2="304"/><line style="stroke:#000000;stroke-width:1.5;" x1="355" x2="621" y1="314" y2="314"/><line style="stroke:#000000;stroke-width:1.5;" x1="621" x2="621" y1="314" y2="520"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="110" x="434" y="329.9951">renderModule</text><!--MD5=[bf726c530d364d0c4390be86bd316841]
entity call translateProgram--><ellipse cx="576" cy="71" fill="#FEFECE" filter="url(#f1jvj39scl4o3l)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="499" y="100.9951">call translateProgram</text><!--MD5=[8c1e675aa9d98a542eb1eac4e3dc2105]
entity emit!--><ellipse cx="755" cy="961" fill="#FEFECE" filter="url(#f1jvj39scl4o3l)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="735.5" y="990.9951">emit!</text><!--MD5=[dcb52e2969b6f260a07401a967b8ed70]
entity renderNode--><rect fill="#00FFFF" filter="url(#f1jvj39scl4o3l)" height="36.2969" style="stroke:#000000;stroke-width:1.5;" width="105" x="647.5" y="468"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="657.5" y="490.9951">renderNode</text><ellipse cx="576.1985" cy="196.5236" fill="#FEFECE" filter="url(#f1jvj39scl4o3l)" rx="32.6985" ry="14.5236" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="561.1709" y="199.381">args</text><!--MD5=[64e3fade032cb7e44cfd9cfa1e897905]
entity renderNode (dry)--><rect fill="#FEFECE" filter="url(#f1jvj39scl4o3l)" height="36.2969" style="stroke:#000000;stroke-width:1.5;" width="142" x="144" y="344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="154" y="366.9951">renderNode (dry)</text><path d="M47,349.5 L47,374.6328 A0,0 0 0 0 47,374.6328 L109,374.6328 A0,0 0 0 0 109,374.6328 L109,367.5 L143.807,362 L109,359.5 L109,359.5 L99,349.5 L47,349.5 A0,0 0 0 0 47,349.5 " fill="#FBFB77" filter="url(#f1jvj39scl4o3l)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M99,349.5 L99,359.5 L109,359.5 L99,349.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="53" y="366.5669">Step 1</text><!--MD5=[3d0cbc899e1e406232b2e15f82eb82ac]
entity markUsageData--><rect fill="#FEFECE" filter="url(#f1jvj39scl4o3l)" height="36.2969" style="stroke:#000000;stroke-width:1.5;" width="133" x="468.5" y="607"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="478.5" y="629.9951">markUsageData</text><path d="M504,725.5 L504,750.6328 A0,0 0 0 0 504,750.6328 L566,750.6328 A0,0 0 0 0 566,750.6328 L566,735.5 L556,725.5 L539,725.5 L535,643.344 L531,725.5 L504,725.5 A0,0 0 0 0 504,725.5 " fill="#FBFB77" filter="url(#f1jvj39scl4o3l)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M556,725.5 L556,735.5 L566,735.5 L556,725.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="510" y="742.5669">Step 2</text><!--MD5=[c9a69a089a14cc75aceafc4cb3bc66a8]
entity ModuleRegistry--><rect fill="#FEFECE" filter="url(#f1jvj39scl4o3l)" height="36.2969" style="stroke:#000000;stroke-width:1.5;" width="131" x="689.5" y="607"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="699.5" y="629.9951">ModuleRegistry</text><path d="M788,473.5 L788,482 L752.527,486 L788,490 L788,498.6328 A0,0 0 0 0 788,498.6328 L850,498.6328 A0,0 0 0 0 850,498.6328 L850,483.5 L840,473.5 L788,473.5 A0,0 0 0 0 788,473.5 " fill="#FBFB77" filter="url(#f1jvj39scl4o3l)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M840,473.5 L840,483.5 L850,483.5 L840,473.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="794" y="490.5669">Step 3</text><!--MD5=[f14c6a259aec3ccbd4cf2def4424af3d]
entity discard data--><ellipse cx="215" cy="486" fill="#FEFECE" filter="url(#f1jvj39scl4o3l)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="171.5" y="515.9951">discard data</text><!--MD5=[2b5bc276f57a4350bf657c018fbf0244]
entity php code--><rect fill="#FEFECE" filter="url(#f1jvj39scl4o3l)" height="36.2969" style="stroke:#000000;stroke-width:1.5;" width="88" x="711" y="720"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="721" y="742.9951">php code</text><!--MD5=[328242f59992514179623b8cd2dbdb1f]
entity formatted php code--><rect fill="#FEFECE" filter="url(#f1jvj39scl4o3l)" height="36.2969" style="stroke:#000000;stroke-width:1.5;" width="167" x="671.5" y="833"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="681.5" y="855.9951">formatted php code</text><!--MD5=[4a5d2c6c9e9b201470cdd0acb37180d2]
entity rootScope--><rect fill="#FEFECE" filter="url(#f1jvj39scl4o3l)" height="36.2969" style="stroke:#000000;stroke-width:1.5;" width="96" x="501" y="468"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="511" y="490.9951">rootScope</text><!--MD5=[18b8b2cd5f8ffe9ae554832aac9f8cd7]
entity dry run context--><rect fill="#FEFECE" filter="url(#f1jvj39scl4o3l)" height="36.2969" style="stroke:#000000;stroke-width:1.5;" width="131" x="371.5" y="344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="381.5" y="366.9951">dry run context</text><!--MD5=[fd653a43105205fc53e935418e72fe3b]
entity context--><rect fill="#FEFECE" filter="url(#f1jvj39scl4o3l)" height="36.2969" style="stroke:#000000;stroke-width:1.5;" width="77" x="537.5" y="344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="547.5" y="366.9951">context</text><!--MD5=[94c7552fe74c355d8cb75f4c258cb6cf]
link call translateProgram to args--><path d="M576,80.103 C576,99.522 576,149.137 576,176.563 " fill="none" id="call translateProgram-to-args" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="576,181.737,580,172.737,576,176.737,572,172.737,576,181.737" style="stroke:#A80036;stroke-width:2.0;"/><!--MD5=[a808e947d4af82781c64d050225043eb]
reverse link dry run context to rootScope--><path d="M461.183,383.986 C469.897,391.881 479.637,401.104 488,410 C505.703,428.832 524.182,452.148 536.097,467.738 " fill="none" id="dry run context-backto-rootScope" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="456.999,380.224,461.0179,389.2156,460.7174,383.5667,466.3663,383.2661,456.999,380.224" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[bf112e974109f3ea01aeb1261ee6abd1]
reverse link context to rootScope--><path d="M571.047,385.379 C565.781,409.176 557.567,446.292 552.792,467.867 " fill="none" id="context-backto-rootScope" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="572.189,380.221,566.3392,388.1444,571.1089,385.1029,574.1503,389.8726,572.189,380.221" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[bf5b13a30ff44f8729fc7e3662c9032f]
link context to renderNode--><path d="M590.191,380.119 C601.391,393.332 617.637,411.852 633,427 C646.304,440.118 662.062,453.841 674.953,464.645 " fill="none" id="context-to-renderNode" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="678.856,467.9,674.5066,459.0635,675.0163,464.6974,669.3825,465.2071,678.856,467.9" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="634" y="423.0669">context</text><!--MD5=[9c97e13a49c4b6d94796da80b58d6d38]
link dry run context to renderNode (dry)--><path d="M371.141,362 C346.063,362 317.28,362 291.312,362 " fill="none" id="dry run context-to-renderNode (dry)" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="286.158,362,295.158,366,291.158,362,295.158,358,286.158,362" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="304.25" y="355.0669">context</text><!--MD5=[a42218edb0ee87b9a5b9b0d2e0179b74]
link rootScope to markUsageData--><path d="M547.662,504.273 C546.212,522.406 543.735,551.735 541,577 C540.137,584.974 539.061,593.691 538.059,601.429 " fill="none" id="rootScope-to-markUsageData" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="537.382,606.609,542.5155,598.2038,538.0305,601.6512,534.583,597.1662,537.382,606.609" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="545" y="565.5669">nodes graph</text><!--MD5=[99fdebd83b405ff4c01e7fe7369ba9e6]
reverse link rootScope to markUsageData--><path d="M526.14,507.561 C517.442,514.683 507.17,522.3 497,528 C477.987,538.656 463.458,527.115 451,545 C442.871,556.67 443.806,564.731 451,577 C458.692,590.118 471.53,599.849 484.883,606.943 " fill="none" id="rootScope-backto-markUsageData" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="530.276,504.116,520.8003,506.8013,526.4337,507.3155,525.9195,512.949,530.276,504.116" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="467.5" y="558.0669">marked</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="452" y="573.1997">nodes graph</text><!--MD5=[0b186ac666045f20ae6b887e338db639]
link args to dry run context--><path d="M548.216,204.406 C527.729,210.798 500.49,222.214 483,241 C457.202,268.71 445.394,312.409 440.363,338.725 " fill="none" id="args-to-dry run context" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="439.446,343.747,444.9983,335.6124,440.3446,338.8284,437.1286,334.1747,439.446,343.747" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="492" y="254.0669">node flags</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="484" y="269.1997">type checker</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="502" y="284.3325">options</text><!--MD5=[74f53774c14a9b55df8244dd802de69f]
link args to context--><path d="M576,211.159 C576,239.352 576,304.224 576,338.628 " fill="none" id="args-to-context" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="576,343.878,580,334.878,576,338.878,572,334.878,576,343.878" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="585" y="254.0669">node flags</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="577" y="269.1997">type checker</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="595" y="284.3325">options</text><!--MD5=[adbc2ab8cf259922b7f5fb55d6967fe8]
link args to ModuleRegistry--><path d="M605.195,203.232 C651.356,213.742 741.346,240.332 794,296 C848.116,353.213 851.166,380.068 868,457 C874.745,487.826 881.249,499.36 868,528 C852.471,561.57 818.775,587.699 792.198,604.164 " fill="none" id="args-to-ModuleRegistry" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="787.662,606.924,797.4299,605.6637,791.9336,604.3253,793.272,598.8291,787.662,606.924" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="862" y="423.0669">options</text><!--MD5=[49f9280511a434c93c0e3c5639635170]
link args to renderNode (dry)--><path d="M544.258,199.774 C502.571,203.731 427.885,214.21 370,241 C315.91,266.034 263.284,312.978 235.435,340.138 " fill="none" id="args-to-renderNode (dry)" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="231.836,343.673,241.0602,340.2212,235.4035,340.1698,235.455,334.5131,231.836,343.673" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="377" y="261.5669">sourceFile</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="375" y="276.6997">(root node)</text><!--MD5=[76afed31a0f6a80eb2dbc1c19793be56]
link args to renderNode--><path d="M605.145,203.282 C626.346,209.086 653.882,220.257 669,241 C718.526,308.951 710.204,416.729 703.723,462.863 " fill="none" id="args-to-renderNode" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="702.986,467.917,708.2449,459.5897,703.7087,462.9695,700.3289,458.4333,702.986,467.917" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="715" y="359.0669">sourceFile</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="713" y="374.1997">(root node)</text><!--MD5=[ed1670e4634fc07a56cca4e5037a7779]
link renderNode to ModuleRegistry--><path d="M706.855,504.074 C716.776,528.789 735.148,574.551 746.103,601.839 " fill="none" id="renderNode-to-ModuleRegistry" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="748.059,606.711,748.4179,596.8687,746.1961,602.071,740.9938,599.8493,748.059,606.711" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="736" y="558.0669">rendered</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="743" y="573.1997">module</text><!--MD5=[a927b26404abb3dfd9082b1ee1d2a428]
link renderNode (dry) to discard data--><path d="M215,380.221 C215,404.805 215,449.439 215,471.672 " fill="none" id="renderNode (dry)-to-discard data" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="215,476.815,219,467.815,215,471.815,211,467.815,215,476.815" style="stroke:#A80036;stroke-width:2.0;"/><!--MD5=[d840252bd9c2a4ba6be3134e0e4cf589]
link ModuleRegistry to php code--><path d="M755,643.344 C755,662.568 755,693.63 755,714.661 " fill="none" id="ModuleRegistry-to-php code" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="755,719.778,759,710.778,755,714.778,751,710.778,755,719.778" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="756" y="686.0669">generateContent</text><!--MD5=[3cfcc388c4dbfb562edb65049a838091]
link php code to formatted php code--><path d="M755,756.344 C755,775.568 755,806.63 755,827.661 " fill="none" id="php code-to-formatted php code" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="755,832.778,759,823.778,755,827.778,751,823.778,755,832.778" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="756" y="799.0669">prettier</text><!--MD5=[f9d2e9fbec4aa88bf395fd45dc087163]
link formatted php code to emit!--><path d="M755,869.352 C755,890.935 755,927.3075 755,946.7706 " fill="none" id="formatted php code-to-emit!" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="755,951.7855,759,942.7855,755,946.7855,751,942.7855,755,951.7855" style="stroke:#A80036;stroke-width:2.0;"/><!--MD5=[0d38a7b7816dce730569b0c26c3f2a35]
@startuml
skinparam componentStyle rectangle

frame "-" {
() "call translateProgram"

package "translateProgram" {

  component [renderNode] #Cyan

  () "call translateProgram" ==> (args)

  node renderModule {
    [rootScope] -up-> [dry run context]
    [rootScope] -up-> [context]
    [dry run context]
  }

  [context] ==> [renderNode] : context
  [dry run context] =right=> [renderNode (dry)] : context

  note left of [renderNode (dry)] : Step 1

  [rootScope] -down-> [markUsageData] : nodes graph
  [markUsageData] -up-> [rootScope] : marked\nnodes graph

  note bottom of [markUsageData] : Step 2

  (args) ==> [dry run context] : node flags\ntype checker\noptions
  (args) ==> [context] : node flags\ntype checker\noptions

  (args) ==> [ModuleRegistry] : options
  (args) =down=> [renderNode (dry)] : sourceFile\n (root node)
  (args) ==> [renderNode]: sourceFile\n (root node)

  note right of [renderNode] : Step 3

  [renderNode] ==> [ModuleRegistry] : rendered\n module
  [renderNode (dry)] ==> () "discard data"

  [ModuleRegistry] ==> [php code] : generateContent
  [php code] ==> [formatted php code] : prettier
}

[formatted php code] ==> () "emit!"
}
@enduml

PlantUML version 1.2021.5beta3(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>