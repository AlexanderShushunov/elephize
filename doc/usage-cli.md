## Использование CLI

Elephize предоставляет command-line утилиту для упрощения использования и интеграции с другими инструментами. Примеры и флаги далее даны в предположении, что elephize установлена глобально (`npm install -g elephize`) либо используется из скрипта в вашем package.json.

### Базовое использование

Запустить с конфиг-файлом .elephizerc:
```shell script
elephize -c .elephizerc
```

После выполнения команды по указанному пути будет создан bootstrap-файл, который необходимо подключить единожды в ваш проект через `require_once` (это необходимо для подключения файлов стандартной библиотеки), а также будут созданы транспилированные файлы. 

Флаги командной строки:

| Краткий | Полный       | Параметр        | Тип     | Пояснение                       |
|---------|--------------|-----------------|---------|---------------------------------|
| `-h`    | `--help`     |                 | bool    | Показать инструкцию |
| `-c`    | `--config`   | FILE            | string  | Путь до файла конфигурации, по умолчанию .elephizerc. |
| `-s`    | `--src`      | GLOB            | string  | Какие файлы нужно обрабатывать. Принимает quoted glob в качестве параметра (например '*.ts') |
| `-o`    | `--output`   | FILE            | string  | Определяет место, куда записать bootstrap-файл. Если файл уже существует, он будет перезаписан. По умолчанию выводит в stdout. |
| `-d`    | `--outDir`   | DIR             | string  | Определяет путь, по которому будут созданы сгенерированные php-файлы |
| `-n`    | `--rootNs`   | NAME            | string  | Задает namespace для сгенерированных классов. По умолчанию - `\VK\Elephize' |
| `-l`    | `--encoding` | ENC             | string  | Задает кодировку для php-файлов. Полезно в случае, если ваш бэкенд использует не utf8 кодировку. |
| `-b`    | `--baseDir`  | DIR             | string  | Задает базовый путь проекта для корректного разрешения относительных путей. |
| `-z`    | `--noZap`    |                 | bool    | Отключает unused code elimination |
| `-e`    | `--bail`     | none/warn/error | string  | Задает уровень ошибок, при котором процесс завершится с ошибочным кодом возврата. По умолчанию - none |
| `-q`    | `--quiet`    |                 | bool    | Не показывать ошибки транспиляции. |
| `-v`    | `--verbose`  |                 | bool    | Показывать подробные ссообщения от транспилятора. |
| `-u`    | `--verboseUsage`    |          | bool    | Показывать подробные отладочные сообщения от подсистемы unused code elimination |

### Файл конфигурации

Файл конфигурации представляет из себя обычный JSON-файл. Состав файла конфигурации полностью совпадает с флагами командной строки (ключом объекта должно быть полное наименование параметра). Пример можно посмотреть в файле `elephizerc.example.json` или в папке demo.

Дополнительные параметры для файла конфигурации:

| Ключ            | Тип                     | Пояснение                       |
|-----------------|-------------------------|---------------------------------|
| `tsPaths`       | { \[string]: string[] } | В этот параметр должен передаваться тот же объект, что и в параметре paths в вашем tsconfig. Параметр нужен для поддержки сокращенных путей в import-конструкциях. |
| `aliases`       | { \[string]: string }   | Алиасы путей для сгенерированных файлов. Полезно в тех случаях, когда на бэкенде файлы нужно разложить иначе, чем на фронтенде. |
| `customGlobals` | { \[string]: string }   | Список непосредственных замен идентификаторов в глобальной области видимости. Полезен в качестве точки интеграции в случае различной имплементации на фронтенде и бэкенде. |

### Демонстрация

В папке `demo` можно найти минимальный готовый сконфигурированный проект, который удобно взять за основу.
